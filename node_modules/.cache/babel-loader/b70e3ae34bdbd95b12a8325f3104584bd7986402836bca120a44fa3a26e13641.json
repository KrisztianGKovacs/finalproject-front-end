{"ast":null,"code":"import _classCallCheck from\"C:/Users/Putyi/Downloads/Tanfolyam/finalproject/finalproject/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Putyi/Downloads/Tanfolyam/finalproject/finalproject/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/Putyi/Downloads/Tanfolyam/finalproject/finalproject/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Putyi/Downloads/Tanfolyam/finalproject/finalproject/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import'./App.css';import Part from'./component/particles/particles';import Navigation from'./component/navigation/navigation';import Login from'./component/login/login';import Register from'./component/register/register';import Logo from'./component/logo/logo';import ImageLinkForm from'./component/imagelinkform/imagelinkform';import Rank from'./component/rank/rank';import FaceRecognize from'./component/facerecognize/facerecognize';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PAT='e3e2e57c46984160bfd4a496e0abe5ec';var USER_ID='chrissmith';var APP_ID='test';var MODEL_ID='face-detection';var MODEL_VERSION_ID='6dc7e46bc9124c5c8824be4822abe105';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById('inputimage');var width=Number(image.width);var height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onButtonSubmit=function(event){_this.setState({imageUrl:_this.state.input});var IMAGE_URL=_this.state.input;var raw=JSON.stringify({\"user_app_id\":{\"user_id\":USER_ID,\"app_id\":APP_ID},\"inputs\":[{\"data\":{\"image\":{\"url\":IMAGE_URL}}}]});var requestOptions={method:'POST',headers:{'Accept':'application/json','Authorization':'Key '+PAT},body:raw};fetch(\"https://api.clarifai.com/v2/models/\"+MODEL_ID+\"/versions/\"+MODEL_VERSION_ID+\"/outputs\",requestOptions).then(function(response){return response.json();}).then(function(response){_this.displayFaceBox(_this.calculateFaceLocation(response));if(response){fetch('http://localhost:3000/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})})//belső fetché\n.then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));});}}).catch(function(error){return console.log('error',error);});};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onRouteChange=function(route){if(route==='signout'){_this.setState({isSignedIn:false});}else if(route==='home'){_this.setState({isSignedIn:true});}_this.setState({route:route});};_this.state={input:'',imageUrl:'',box:{},route:'login',isSignedIn:false,user:{id:'',name:'',email:'',entries:'',joined:''}};return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Part,{}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:this.state.isSignedIn,onRouteChange:this.onRouteChange}),this.state.route==='home'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognize,{box:this.state.box,imageUrl:this.state.imageUrl})]}):this.state.route==='login'?/*#__PURE__*/_jsx(Login,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}]);return App;}(Component);export default App;","map":{"version":3,"names":["React","Component","Part","Navigation","Login","Register","Logo","ImageLinkForm","Rank","FaceRecognize","jsx","_jsx","jsxs","_jsxs","PAT","USER_ID","APP_ID","MODEL_ID","MODEL_VERSION_ID","App","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","call","loadUser","data","setState","user","id","name","email","entries","joined","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","onInputChange","event","input","target","value","onButtonSubmit","imageUrl","state","IMAGE_URL","raw","JSON","stringify","requestOptions","method","headers","body","fetch","then","response","json","displayFaceBox","count","Object","assign","catch","error","console","log","box","onRouteChange","route","isSignedIn","_createClass","key","render","className","children"],"sources":["C:/Users/Putyi/Downloads/Tanfolyam/finalproject/finalproject/src/App.js"],"sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport Part from './component/particles/particles';\nimport Navigation from './component/navigation/navigation';\nimport Login from './component/login/login';\nimport Register from './component/register/register';\nimport Logo from './component/logo/logo';\nimport ImageLinkForm from './component/imagelinkform/imagelinkform';\nimport Rank from './component/rank/rank';\nimport FaceRecognize from './component/facerecognize/facerecognize';\n\nconst PAT = 'e3e2e57c46984160bfd4a496e0abe5ec';\n\nconst USER_ID = 'chrissmith';       \nconst APP_ID = 'test';\n\nconst MODEL_ID = 'face-detection';\nconst MODEL_VERSION_ID = '6dc7e46bc9124c5c8824be4822abe105';    \n  \n\nclass App extends Component {\n    constructor() {\n        super();\n        this.state = {\n            input: '',\n            imageUrl: '',\n            box: {},\n            route: 'login',\n            isSignedIn: false,\n            user: {\n                id: '',\n                name: '',\n                email: '',\n                entries: '',\n                joined: ''\n            }\n        }\n\n    }\n\n   loadUser = (data) => {\n        this.setState({user: {\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            entries: data.entries,\n            joined: data.joined  \n        }})\n    }\n\n    calculateFaceLocation = (data) => {\n     const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n     const image = document.getElementById('inputimage');\n     const width = Number(image.width);\n     const height = Number(image.height);\n          \n     return {\n        leftCol: clarifaiFace.left_col * width,\n        topRow: clarifaiFace.top_row * height,\n        rightCol: width - (clarifaiFace.right_col * width),\n        bottomRow: height - (clarifaiFace.bottom_row * height),\n        \n     }   \n    }\n    \n\n    onInputChange = (event) => {\n        this.setState({input: event.target.value});\n    }\n\n    onButtonSubmit = (event) => {\n        this.setState({imageUrl: this.state.input});\n        const IMAGE_URL = this.state.input;\n        \n        const raw = JSON.stringify({\n            \"user_app_id\": {\n                \"user_id\": USER_ID,\n                \"app_id\": APP_ID\n            },\n            \"inputs\": [\n                {\n                    \"data\": {\n                        \"image\": {\n                            \"url\": IMAGE_URL\n                        }\n                    }\n                }\n            ]\n        });\n         \n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Authorization': 'Key ' + PAT\n            },\n            body: raw\n        };\n        \n    fetch(\"https://api.clarifai.com/v2/models/\" + MODEL_ID + \"/versions/\" + MODEL_VERSION_ID + \"/outputs\", requestOptions)\n    .then(response => response.json())\n    .then(response => { \n        this.displayFaceBox(this.calculateFaceLocation(response));\n        if (response) {\n            fetch('http://localhost:3000/image', {\n                method: 'put',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify({\n                id: this.state.user.id\n                                    })\n            }) //belső fetché\n            .then(response => response.json())\n            .then(count => {\n                this.setState(Object.assign(this.state.user, {entries: count}))\n                    \n            })\n            \n        }\n        \n    })\n    \n    .catch(error => console.log('error', error))\n\n    }\n\n    displayFaceBox = (box) => {\n        this.setState({box: box});\n        }\n\n    onRouteChange = (route) => {\n        if ( route === 'signout') {\n            this.setState({isSignedIn: false})\n        } else if ( route === 'home') {\n            this.setState({isSignedIn: true})\n        }\n        this.setState({route: route});\n    }    \n\n\n    render() {\n    return (\n      <div className=\"App\">\n      <Part />\n      <Navigation isSignedIn={this.state.isSignedIn} onRouteChange={this.onRouteChange} />\n      {this.state.route === 'home'  \n      ? <div>\n        <Logo />\n        <Rank name={this.state.user.name} entries={this.state.user.entries} />\n        <ImageLinkForm \n        onInputChange={this.onInputChange} \n        onButtonSubmit={this.onButtonSubmit} \n        />\n        <FaceRecognize box={this.state.box} imageUrl={this.state.imageUrl} />\n      </div>\n    :   (\n        this.state.route === 'login' \n        ? <Login loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n        : <Register loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n        )\n        \n\n    }\n    \n    </div>\n    )\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}